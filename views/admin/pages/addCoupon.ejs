<div class="container">
    <h1 class="mt-4">Add Coupon</h1>
    <form id="couponForm" action="/admin/coupon/add-coupon" method="post" onsubmit="return validateForm()">

        <div class="alert alert-danger fade show mt-3 col-md-6 text-center" id="error-message" role="alert"
            style="display: none; ">
        </div>

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="code">Coupon Code:</label>
                <input type="text" class="form-control" id="couponCode" name="code">
            </div>
            <div class="form-group col-md-3">
                <label for="minimumPurchase">Minimum Purchase Amount:</label>
                <div class="input-group">
                    <input type="number" class="form-control" id="minimumPurchase" name="minimumPurchase">
                    <div class="input-group-append">
                        <span class="input-group-text">₹</span>
                    </div>
                </div>
            </div>
            <div class="form-group col-md-3">
                <label for="minimumPurchase">Maximum Purchase Amount:</label>
                <div class="input-group">
                    <input type="number" class="form-control" id="maximumPurchase" name="maximumPurchase">
                    <div class="input-group-append">
                        <span class="input-group-text">₹</span>
                    </div>
                </div>
            </div>
            <div class="form-group col-md-6">
                <label for="discountAmount">Discount Percentage</label>
                <div class="input-group">
                    <input type="number" class="form-control" id="discountAmount" name="discountAmount">
                    <div class="input-group-append">
                        <span class="input-group-text">%</span>
                    </div>
                </div>
            </div>
            <div class="form-group col-md-3">
                <label for="maximumUses">Maximum Uses:</label>
                <input type="number" class="form-control" id="maximumUses" name="maximumUses">
            </div>

            <div class="form-group col-md-3">
                <label for="expirationDate">Expiration Date:</label>
                <input type="date" class="form-control" id="expirationDate" name="expirationDate">
            </div>

            <div class="form-group col-md-12">
                <label for="description">Description:</label>
                <textarea class="form-control" id="description" name="description"></textarea>
            </div>
        </div>

        <div class="form-group col-md-12 mt-3">
            <button type="submit" class="btn btn-primary">Add Coupon</button>
        </div>
    </form>
</div>
<script>
    const errorMessage = document.getElementById('error-message');

    const hide = (element) => {
        element.style.display = 'none';
    }

    function validateForm() {
        const code = document.getElementById('couponCode').value;
        const discountAmount = document.getElementById('discountAmount').value;
        const expirationDate = document.getElementById('expirationDate').value;
        const minimumPurchase = document.getElementById('minimumPurchase').value
        const maximumPurchase = document.getElementById('maximumPurchase').value
        const maximumUses = document.getElementById('maximumUses').value
        const description = document.getElementById('description').value;

        if (code.trim() === '' || discountAmount.trim() === '' ||
            discountAmount.trim() === '' || minimumPurchase.trim() === '' ||
            maximumPurchase.trim() === '' || description.trim() === '' ||
            expirationDate.trim() == '') {
            errorMessage.textContent = 'All fields are required.';
            errorMessage.style.display = 'block';
            setTimeout(() => hide(errorMessage), 3000);
            return false; // Prevent form submission
        }

        if (isNaN(minimumPurchase) || minimumPurchase < 0) {
            errorMessage.textContent = 'Minimum Purchase Amount must be a non-negative number.';
            errorMessage.style.display = 'block';
            setTimeout(() => hide(errorMessage), 3000);
            return false;
        }

        if (isNaN(maximumPurchase) || maximumPurchase < 0) {
            errorMessage.textContent = 'Maximum Purchase Amount must be a non-negative number.';
            errorMessage.style.display = 'block';
            setTimeout(() => hide(errorMessage), 3000);
            return false;
        }

        if (isNaN(discountAmount) || discountAmount < 0 || discountAmount > 50) {
            errorMessage.textContent = 'Discount Amount must be a number between 0 and 50%.';
            errorMessage.style.display = 'block';
            setTimeout(() => hide(errorMessage), 3000);
            return false;
        }

        if (isNaN(maximumUses) || maximumUses < 0) {
            errorMessage.textContent = 'Maximum Uses must be a non-negative integer.';
            errorMessage.style.display = 'block';
            setTimeout(() => hide(errorMessage), 3000);
            return false;
        }

        if (description.trim().length < 6) {
            errorMessage.textContent = 'Description should be at least 4 characters.';
            errorMessage.style.display = 'block';
            setTimeout(() => hide(errorMessage), 3000);
            return false;
        }

        return true;
    }

</script>