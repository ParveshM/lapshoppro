<div class="container">
    <h1 class="mt-4">Edit Coupon</h1>
    <div class="alert alert-danger fade show mt-3 col-md-6 text-center" id="error-message" role="alert"
        style="display: none; ">
    </div>
    <% if (coupon) { %>
        <form id="couponForm" action="/admin/coupons/edit-coupon/<%= coupon._id %>" method="post">
            <div class="form-row">

                <div class="form-group col-md-6">
                    <label for="code">Coupon Code:</label>
                    <input type="text" class="form-control" id="code" value="<%= coupon.code %>" name="couponCode" required>
                </div>
                <div class="form-group col-md-3">
                    <label for="minimumPurchase">Minimum Purchase Amount:</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="minimumPurchase"
                            value="<%= coupon.minimumPurchase %>" name="minimumPurchase">
                        <div class="input-group-append">
                            <span class="input-group-text">₹</span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-3">
                    <label for="minimumPurchase">Maximum Purchase Amount:</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="maximumPurchase"
                            value="<%= coupon.maximumPurchase %>" name="maximumPurchase">
                        <div class="input-group-append">
                            <span class="input-group-text">₹</span>
                        </div>
                    </div>
                </div>

                <div class="form-group col-md-6">
                    <label for="discountAmount">Discount Percentage:</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="discountAmount"
                            value="<%= coupon.discountAmount %>" name="discountAmount" required>
                        <div class="input-group-append">
                            <span class="input-group-text">%</span>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-3">
                    <label for="maximumUses">Maximum Uses:</label>
                    <input type="number" class="form-control" id="maximumUses" value="<%= coupon.maximumUses%>"
                        name="maximumUses">
                </div>

                <div class="form-group col-md-3">
                    <label for="expirationDate">Expiration Date:</label>
                    <input type="date" class="form-control" id="newExpireDate" name="newExpireDate">
                   </div>

                <div class="form-group col-md-12">
                    <label for="description">Description:</label>
                    <textarea class="form-control" id="description"
                        name="description"><%= coupon.description %></textarea>
                </div>
            </div>

            <div class="form-group col-md-12 mt-3">
                <button type="submit" class="btn btn-primary">Edit Coupon</button>
            </div>
        </form>
</div>
<% } %>


    <script>
        const errorMessage = document.getElementById('error-message');

        const hide = (element) => {
            element.style.display = 'none';
        }

        function validateForm() {
            const code = document.getElementById('couponCode').value;
            const discountAmount = document.getElementById('discountAmount').value;
            const newExpirationDate = document.getElementById('newExpirationDate').value;
            const minimumPurchase = document.getElementById('minimumPurchase').value
            const maximumPurchase = document.getElementById('maximumPurchase').value
            const maximumUses = document.getElementById('maximumUses').value
            const description = document.getElementById('description').value;

            if (code.trim() === '' || discountAmount.trim() === '' ||
                minimumPurchase.trim() === '' || maximumPurchase.trim() === '' ||
                description.trim() === '') {
                errorMessage.textContent = 'All fields are required.';
                errorMessage.style.display = 'block';
                setTimeout(() => hide(errorMessage), 3000);
                return false; 
            }

            return true;
        }



    </script>